*** KB v1 data sources ***
*** notes/kb1_data-sources.txt ***
*** sql in sql/20160502_generate-tables.sql
*** sql in sql/20160502_indiv-dist.sql
*** dev sql for iterating functions
  - p_simmy() -> sql/20160524_simmy-function.sql
  - p_odnb() -> sql/20160526_odnb-function.sql
  - p_parentless() -> sql/20160531_parentless-function.sql

STATIC:
/kb1/data/world-50m.json
/kb1/data/world-110m.json
/kb1/timeline_events.csv
/kb1/data/occupations.txt

PHP:
kinQuery.php? [ s(source indiv)[indiv_id], q(query type)[gen, list] ]
countyQuery.php? [s(source indiv)[indiv_id], q(query type)[path]]
similarity.php? [i[indiv_id], y[year], q(query type)[kin]]
pathQuery.php? [s=I2967&t=I1797&b=0&a=0&c=0]
search.php? [s(source indiv), y(year start), e (year end)]

TABLES:
models
------
indiv
event
particip
indiv_occu (not related to OCCU event; 1..* assigned professions from occu table)
occu (lookup)
places (we are not adding )

calculated
----------
//**// indiv_dist (notes/sql/20160503_post-process.sql)

- depends on trag_text, tragic

1) -- re-create trag_text
  DONE; run 31 May; 29951 rows

2) -- re-create tragic
  DONE; run 31 May; 29951 rows; ~10 min

3) -- create new indiv_dist records for new indivs
  3a  fill indiv_dist fields" trarray, tragedy; run 31 May
  3b  children, marriages; run 31 May
  3c  odnb wordcount; run 31 May

  DONE; run 31 May; 0 rows because this set had been entered already

4)  //**// indiv_text (used to rank by count of characters)
  DONE; run 31 May, 11555 rows

5)  //**// indiv_events
  DONE; run 31 May, 29951 rows

6) //**// re-create extfamily
    DONE; run 01 June, spouses, children separately

7)    - update siblings in extfamily
    DONE; run 01 June

8)  //**// edges
    DONE; run 01 June

9) update indiv_dist fields
  - tragedy DONE
  - trarray DONE
  9c) children DONE
      marriage DONE
  9d) odnb_id, odnb_wordcount DONE
    - depends on value entered for indiv.odnb_id in new records

10) - odnb (distance to an odnb-er); DONE
      - select p_odnb();
      sql/20160526_odnb-function.sql
      - depends on odnb_id, odnb_wordcount

11) - parentless (# generations on graph); DONE
      - select p_parentless();
      sql/20160531_parentless-function.sql

12) - similarity and sims DONE
    12a) update/recreate similarity: family vitals & text tsvectors
    - sims table: for each INDIV, 15 most similar on dimensions of sims table
      (used to populate 'events in lives of similar people' on bio panel)
    12b) select p_simmy(); depends on updating public.similarity


  - (??) inbred -- no can do

  - (??) centrality -- no can do

TESTS/FIXES
  - indiv_dist: all fields need a value
  - new INDIVs with no death year need dest = 2013
